{"ast":null,"code":"import takeoff_marker from \"./img/takeoff_marker.png\";\nimport point_marker from \"./img/point_marker.png\";\nimport icon_center from \"./img/icon_center.png\";\nimport mapboxgl from 'mapbox-gl';\nfunction rotateFigureCenter(cords, center, phi) {\n  phi = phi * Math.PI / 180;\n  let rotatedFigure = [];\n  for (let pair of cords) {\n    let x = pair[0] - center[0];\n    let y = pair[1] - center[1];\n    let x_rot = x * Math.cos(phi) - y * Math.sin(phi);\n    let y_rot = x * Math.sin(phi) + y * Math.cos(phi);\n    rotatedFigure.push([x_rot + center[0], y_rot + center[1]]);\n  }\n  return rotatedFigure;\n}\nexport class CommonManager {\n  constructor(map, manager3D, update_modal_message) {\n    this.map = map;\n    this.manager3D = manager3D;\n    this.translate_cursor = false;\n    this.start_marker = null;\n    this.update_modal_message = update_modal_message;\n    this.polygon = null;\n    this.conture = {\n      markers: [],\n      cords: [],\n      edges: [],\n      source: {\n        'type': 'geojson',\n        'data': {\n          'type': 'Feature',\n          'geometry': {\n            'type': 'Polygon',\n            'coordinates': [[]]\n          }\n        }\n      },\n      layer_area: {\n        'id': \"conture\",\n        'type': 'fill',\n        'source': \"conture\",\n        'layout': {},\n        'paint': {\n          'fill-color': '#008000',\n          'fill-opacity': 0.5\n        }\n      },\n      layer_line: {\n        'id': 'line_conture',\n        'type': 'line',\n        'source': \"conture\",\n        'layout': {},\n        'paint': {\n          'line-color': '#000',\n          'line-width': 2\n        }\n      }\n    };\n    this.markup = {\n      cords: [],\n      source: {\n        'type': 'geojson',\n        'data': {\n          'type': 'Feature',\n          'geometry': {\n            'type': 'LineString',\n            'coordinates': [[]]\n          }\n        }\n      },\n      layer: {\n        'id': \"markup\",\n        'type': 'line',\n        'source': \"markup\",\n        'layout': {},\n        'paint': {\n          'line-color': '#fff',\n          'line-width': 2\n        }\n      }\n    };\n  }\n  toggleCursor() {\n    if (this.translate_cursor === true) {\n      this.translate_cursor = false;\n    } else {\n      this.translate_cursor = true;\n    }\n  }\n  setStartMarker(coords) {\n    if (this.start_marker === null) {\n      this.start_marker = new mapboxgl.Marker({\n        draggable: true\n      }).setLngLat(coords).addTo(this.map);\n      let icon = document.createElement('img');\n      icon.src = takeoff_marker;\n      icon.width = 35;\n      icon.height = 35;\n      this.start_marker.getElement().querySelector(\"svg\").remove();\n      this.start_marker.getElement().append(icon);\n      let indicator = document.createElement('span');\n      indicator.className = \"mapbox_gl_active_indicator\";\n      this.start_marker.getElement().append(indicator);\n      this.start_marker.getElement().classList.add(\"takeoff\");\n    } else {\n      this.start_marker.remove();\n      this.start_marker = null;\n      this.setStartMarker(coords);\n    }\n  }\n  changeMarkerIcon(marker, Icon, width, height) {\n    let icon = document.createElement('img');\n    icon.src = Icon;\n    icon.width = width;\n    icon.height = height;\n    marker.getElement().classList.add(\"mapboxgl-marker__polygon\");\n    marker.getElement().querySelector(\"svg\").remove();\n    marker.getElement().append(icon);\n    let indicator = document.createElement('span');\n    indicator.className = \"mapbox_gl_active_indicator\";\n    marker.getElement().append(indicator);\n  }\n  addConturePoint(coords) {\n    let cords = coords;\n    let marker = new mapboxgl.Marker({\n      draggable: true\n    }).setLngLat(cords).addTo(this.map);\n    marker.conture_index = this.conture.markers.length;\n    this.conture.markers.push(marker);\n    // let dragContainer = (e) => {e.mapElement = this; e.marker = marker; e.evt = evt; this.drag(e)}\n    // let dragEndContainer = (e) => {e.evt = evt; this.dragEndCont(e)}\n    // let dragStartContainer = (e) => {e.evt = evt; this.dragStartCont(e)}\n    // marker.on(\"drag\", dragContainer)\n    // marker.on(\"dragend\", dragEndContainer)\n    // marker.on(\"dragstart\", dragStartContainer)\n    this.changeMarkerIcon(marker, point_marker, 35, 35);\n    if (this.conture.markers.length == 1) {\n      this.conture.cords.push([cords.lng, cords.lat]);\n      this.conture.cords.push([cords.lng, cords.lat]);\n      this.conture.source.data.geometry.coordinates = [this.conture.cords];\n      this.map.addSource(\"conture\", this.conture.source);\n      this.map.addLayer(this.conture.layer_area);\n      this.map.addLayer(this.conture.layer_line);\n    }\n    if (this.conture.markers.length > 1) {\n      this.conture.cords.pop();\n      this.conture.cords.push([cords.lng, cords.lat]);\n      this.conture.cords.push(this.conture.cords[0]);\n      this.conture.source.data.geometry.coordinates = [this.conture.cords];\n      this.map.getSource(this.id).setData(this.conture.source.data);\n    }\n    if (this.conture.markers.length == 3) {\n      this.center_marker = new mapboxgl.Marker({\n        draggable: true\n      });\n      this.changeMarkerIcon(this.center_marker, icon_center, 25, 25);\n      let cords = [0, 0];\n      for (let c = 0; c < this.conture.cords.length - 1; c++) {\n        cords[0] += this.conture.cords[c][0];\n        cords[1] += this.conture.cords[c][1];\n      }\n      cords = [cords[0] / (this.conture.cords.length - 1), cords[1] / (this.conture.cords.length - 1)];\n      this.center_marker.setLngLat(cords).addTo(this.map);\n      this.container__dragStartCenterMarker = e => {\n        e.mapElement = this;\n        e.marker = this.center_marker;\n        e.evt = this.data;\n        this.dragStartCenterMarker(e);\n      };\n      this.container__dragCenterMarker = e => {\n        e.mapElement = this;\n        e.marker = this.center_marker;\n        e.evt = this.data;\n        this.dragCenterMarker(e);\n      };\n      this.container__dragEndStartCenterMarker = e => {\n        e.mapElement = this;\n        e.marker = this.center_marker;\n        e.evt = this.data;\n        this.dragEndStartCenterMarker(e);\n      };\n      this.center_marker.on(\"dragstart\", this.container__dragStartCenterMarker);\n      this.center_marker.on(\"drag\", this.container__dragCenterMarker);\n      this.center_marker.on(\"dragend\", this.container__dragEndStartCenterMarker);\n      let cords_markup = this.markupPolygon();\n      this.markup.cords = cords_markup;\n      this.markup.source.data.geometry.coordinates = this.markup.cords;\n      this.map.addSource(\"markup\", this.markup.source);\n      this.start_point = new mapboxgl.Marker({\n        draggable: false\n      });\n      this.end_point = new mapboxgl.Marker({\n        draggable: false\n      });\n      this.start_point.setLngLat(this.markup.cords[0]).addTo(this.map);\n      this.end_point.setLngLat(this.markup.cords[this.markup.cords.length - 1]).addTo(this.map);\n      this.changePointIcon(this.start_point, point_marker, 35, 35);\n      this.changePointIcon(this.end_point, point_marker, 35, 35);\n    }\n  }\n  setPolygon(coords) {\n    if (this.start_marker === null) {\n      this.update_modal_message({\n        active: true,\n        heading: \"Ошибка\",\n        message: \"Сначала добавьте точку старта\"\n      });\n    } else {\n      this.addConturePoint(coords);\n    }\n  }\n}","map":{"version":3,"names":["takeoff_marker","point_marker","icon_center","mapboxgl","rotateFigureCenter","cords","center","phi","Math","PI","rotatedFigure","pair","x","y","x_rot","cos","sin","y_rot","push","CommonManager","constructor","map","manager3D","update_modal_message","translate_cursor","start_marker","polygon","conture","markers","edges","source","layer_area","layer_line","markup","layer","toggleCursor","setStartMarker","coords","Marker","draggable","setLngLat","addTo","icon","document","createElement","src","width","height","getElement","querySelector","remove","append","indicator","className","classList","add","changeMarkerIcon","marker","Icon","addConturePoint","conture_index","length","lng","lat","data","geometry","coordinates","addSource","addLayer","pop","getSource","id","setData","center_marker","c","container__dragStartCenterMarker","e","mapElement","evt","dragStartCenterMarker","container__dragCenterMarker","dragCenterMarker","container__dragEndStartCenterMarker","dragEndStartCenterMarker","on","cords_markup","markupPolygon","start_point","end_point","changePointIcon","setPolygon","active","heading","message"],"sources":["/Users/mihailbaleev/Documents/GitHub/lastochka_spraying/src/Spraying/CommonManager.js"],"sourcesContent":["import takeoff_marker from \"./img/takeoff_marker.png\";\nimport point_marker from \"./img/point_marker.png\";\nimport icon_center from \"./img/icon_center.png\";\nimport mapboxgl from 'mapbox-gl';\n\nfunction rotateFigureCenter(cords, center, phi){\n    phi = phi*Math.PI/180\n    let rotatedFigure = []\n  \n    for(let pair of cords){\n        let x = pair[0]-center[0]\n        let y = pair[1]-center[1]\n        let x_rot = x*Math.cos(phi) - y*Math.sin(phi)\n        let y_rot = x*Math.sin(phi) + y*Math.cos(phi)\n        rotatedFigure.push([\n          x_rot+center[0], y_rot+center[1]\n        ])\n    }\n    return rotatedFigure\n  }\n\nexport class CommonManager{\n    constructor(map, manager3D, update_modal_message){\n        this.map = map \n        this.manager3D = manager3D\n        this.translate_cursor = false \n        this.start_marker = null\n        this.update_modal_message = update_modal_message\n        this.polygon = null\n        this.conture = {\n            markers:[],\n            cords:[],\n            edges:[],\n            source:{\n              'type': 'geojson',\n              'data': {\n                'type': 'Feature',\n                'geometry': {\n                'type': 'Polygon',\n                'coordinates': [\n                    []\n                  ]\n                }\n              }\n            },\n            layer_area:{\n              'id': \"conture\",\n              'type': 'fill',\n              'source': \"conture\",\n              'layout': {},\n              'paint': {\n                'fill-color': '#008000',\n                'fill-opacity': 0.5\n                }\n            },\n            layer_line:{\n                'id': 'line_conture',\n                'type': 'line',\n                'source': \"conture\",\n                'layout': {},\n                'paint': {\n                'line-color': '#000',\n                'line-width': 2\n                }\n            }\n        }\n          this.markup = {\n            cords:[],\n            source:{\n              'type': 'geojson',\n              'data': {\n                'type': 'Feature',\n                'geometry': {\n                'type': 'LineString',\n                'coordinates': [\n                    []\n                  ]\n                }\n              }\n            },\n            layer:{\n              'id': \"markup\",\n              'type': 'line',\n              'source': \"markup\",\n              'layout': {},\n              'paint': {\n              'line-color': '#fff',\n              'line-width': 2\n              }\n            }\n        };\n    }\n\n    toggleCursor(){\n        if (this.translate_cursor === true){\n            this.translate_cursor = false \n        }else{\n            this.translate_cursor = true\n        }\n    }\n\n    setStartMarker(coords){\n        if (this.start_marker === null){\n            this.start_marker = new mapboxgl.Marker(\n                {\n                    draggable: true\n                }\n            ).setLngLat(coords).addTo(this.map)\n            let icon = document.createElement('img');\n            icon.src = takeoff_marker;\n            icon.width = 35\n            icon.height = 35\n            this.start_marker.getElement().querySelector(\"svg\").remove()\n            this.start_marker.getElement().append(icon)\n            let indicator = document.createElement('span');\n            indicator.className = \"mapbox_gl_active_indicator\"\n            this.start_marker.getElement().append(indicator)\n            this.start_marker.getElement().classList.add(\"takeoff\")\n        }else{\n            this.start_marker.remove()\n            this.start_marker = null\n            this.setStartMarker(coords)\n        }\n    }\n\n    changeMarkerIcon(marker, Icon, width, height) {\n        let icon = document.createElement('img');\n        icon.src = Icon;\n        icon.width = width\n        icon.height = height\n        marker.getElement().classList.add(\"mapboxgl-marker__polygon\")\n        marker.getElement().querySelector(\"svg\").remove()\n        marker.getElement().append(icon)\n    \n        let indicator = document.createElement('span');\n        indicator.className = \"mapbox_gl_active_indicator\"\n        marker.getElement().append(indicator)\n      }\n\n    addConturePoint(coords){\n        let cords = coords;\n        let marker = new mapboxgl.Marker(\n            {\n                draggable: true\n            }\n        ).setLngLat(cords).addTo(this.map);\n        marker.conture_index = this.conture.markers.length;\n        this.conture.markers.push(marker)\n        // let dragContainer = (e) => {e.mapElement = this; e.marker = marker; e.evt = evt; this.drag(e)}\n        // let dragEndContainer = (e) => {e.evt = evt; this.dragEndCont(e)}\n        // let dragStartContainer = (e) => {e.evt = evt; this.dragStartCont(e)}\n        // marker.on(\"drag\", dragContainer)\n        // marker.on(\"dragend\", dragEndContainer)\n        // marker.on(\"dragstart\", dragStartContainer)\n        this.changeMarkerIcon(marker, point_marker, 35, 35)\n        if(this.conture.markers.length == 1){\n          this.conture.cords.push([cords.lng, cords.lat])\n          this.conture.cords.push([cords.lng, cords.lat])\n          this.conture.source.data.geometry.coordinates = [this.conture.cords]\n          this.map.addSource(\"conture\", this.conture.source)\n          this.map.addLayer(this.conture.layer_area)\n          this.map.addLayer(this.conture.layer_line)\n        }\n        if(this.conture.markers.length > 1){\n          this.conture.cords.pop()\n          this.conture.cords.push([cords.lng, cords.lat])\n          this.conture.cords.push(this.conture.cords[0])\n          this.conture.source.data.geometry.coordinates = [this.conture.cords]\n          this.map.getSource(this.id).setData(this.conture.source.data)\n        }\n        if(this.conture.markers.length == 3){\n          this.center_marker = new mapboxgl.Marker({\n            draggable:true\n          })\n          this.changeMarkerIcon(this.center_marker, icon_center, 25, 25)\n          let cords = [0,0]\n          for(let c = 0; c < this.conture.cords.length-1; c++){\n            cords[0] += this.conture.cords[c][0]\n            cords[1] += this.conture.cords[c][1]\n          }\n          cords = [cords[0]/(this.conture.cords.length-1), cords[1]/(this.conture.cords.length-1)]\n          this.center_marker.setLngLat(cords).addTo(this.map);\n    \n          this.container__dragStartCenterMarker = (e) => {e.mapElement = this; e.marker = this.center_marker; e.evt = this.data; this.dragStartCenterMarker(e)}\n          this.container__dragCenterMarker = (e) => {e.mapElement = this; e.marker = this.center_marker; e.evt = this.data; this.dragCenterMarker(e)}\n          this.container__dragEndStartCenterMarker = (e) => {e.mapElement = this; e.marker = this.center_marker; e.evt = this.data; this.dragEndStartCenterMarker(e)}\n      \n          this.center_marker.on(\"dragstart\", this.container__dragStartCenterMarker)\n          this.center_marker.on(\"drag\", this.container__dragCenterMarker)\n          this.center_marker.on(\"dragend\", this.container__dragEndStartCenterMarker)\n          let cords_markup = this.markupPolygon()\n          this.markup.cords = cords_markup\n          this.markup.source.data.geometry.coordinates = this.markup.cords\n          this.map.addSource(\"markup\", this.markup.source)\n          this.start_point = new mapboxgl.Marker({\n            draggable:false\n          })\n          this.end_point = new mapboxgl.Marker({\n            draggable:false\n          })\n          \n          this.start_point.setLngLat(this.markup.cords[0]).addTo(this.map)\n          this.end_point.setLngLat(this.markup.cords[this.markup.cords.length-1]).addTo(this.map)\n          \n          this.changePointIcon(this.start_point, point_marker, 35, 35)\n          this.changePointIcon(this.end_point, point_marker, 35, 35)\n        }\n    }\n\n    setPolygon(coords){\n        if (this.start_marker === null){\n            this.update_modal_message({active: true, heading: \"Ошибка\", message: \"Сначала добавьте точку старта\"})\n        }else{\n            this.addConturePoint(coords)\n        }\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}