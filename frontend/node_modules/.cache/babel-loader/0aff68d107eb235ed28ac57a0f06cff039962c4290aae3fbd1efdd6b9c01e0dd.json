{"ast":null,"code":"var _jsxFileName = \"/Users/mihailbaleev/Documents/GitHub/lastochka_spraying/src/Spraying/Spraying.js\",\n  _s = $RefreshSig$();\nimport \"./Spraying.scss\";\nimport Settings from \"./Settings/Settings\";\nimport { MapManager } from \"./MapManager\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { update_modal_message } from \"../AppSlice\";\nimport { sprayManager } from \"./sprayManager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Spraying = props => {\n  _s();\n  const [MapManager_obj, setMapManager] = useState(null);\n  const [cursor_coords, setCursorCoords] = useState([0, 0]);\n  const spray_manager = new sprayManager();\n  const [zone_settings, setZone] = useState({\n    culture: \"Зерно\",\n    start_pos: {\n      x: \"\",\n      y: \"\"\n    },\n    angle: 0,\n    line_spacing: 1,\n    is_return: true\n  });\n  const changeZone = (key, value) => {\n    let cur_zone = {\n      ...zone_settings\n    };\n    cur_zone[key] = value;\n    setZone(cur_zone);\n    if (key === \"angle\") {\n      props.manager.rotatePolygon(value);\n    } else if (key === \"line_spacing\") {\n      props.manager.changeLineSpacing(value);\n    } else if (key === \"is_return\") {\n      props.manager.toggleRTL();\n    }\n  };\n  const [move_settings, setMove] = useState({\n    speed: 3,\n    alt: 5,\n    tank_capacity: 1,\n    liters_per_sec: 0.1,\n    mode: \"spray\"\n  });\n  const changeMove = (key, value) => {\n    let cur_move = {\n      ...move_settings\n    };\n    cur_move[key] = value;\n    setMove(cur_move);\n  };\n  const [wheather_settings, setWheather] = useState({\n    temperature: 20,\n    wind_speed: 2,\n    humidity: 90,\n    adjuvants: false\n  });\n  const changeWheather = (key, value) => {\n    let cur_wheather = {\n      ...wheather_settings\n    };\n    cur_wheather[key] = value;\n    setWheather(cur_wheather);\n  };\n  const savePlan = () => {\n    console.log(zone_settings);\n    console.log(move_settings);\n  };\n  useEffect(() => {\n    if (props.manager3D !== null) {\n      let manager = new MapManager(props.map, props.manager3D, props.update_modal_message);\n      setMapManager(manager);\n      props.map.on(\"mousemove\", e => {\n        if (manager.translate_cursor === true) {\n          setCursorCoords([e.lngLat.lng, e.lngLat.lat]);\n        }\n      });\n      props.map.on(\"click\", e => {\n        if (manager.translate_cursor === true) {\n          manager.setStartMarker([e.lngLat.lng, e.lngLat.lat]);\n        } else {\n          manager.setPolygon([e.lngLat.lng, e.lngLat.lat]);\n        }\n      });\n    }\n  }, [props.manager3D]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spraying\",\n    children: /*#__PURE__*/_jsxDEV(Settings, {\n      map_manager: MapManager_obj,\n      cursor_coords: cursor_coords,\n      spray_manager: spray_manager,\n      zone_settings: zone_settings,\n      changeZone: changeZone,\n      move_settings: move_settings,\n      changeMove: changeMove,\n      wheather_settings: wheather_settings,\n      changeWheather: changeWheather,\n      savePlan: savePlan\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 12\n  }, this);\n};\n_s(Spraying, \"E0+HYLjc/7nPObbjTRG0S0pw9IU=\");\n_c = Spraying;\nconst mapStateToProps = state => {\n  return state;\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    \"update_modal_message\": data => {\n      dispatch(update_modal_message(data));\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Spraying);\nvar _c;\n$RefreshReg$(_c, \"Spraying\");","map":{"version":3,"names":["Settings","MapManager","useEffect","useState","connect","update_modal_message","sprayManager","jsxDEV","_jsxDEV","Spraying","props","_s","MapManager_obj","setMapManager","cursor_coords","setCursorCoords","spray_manager","zone_settings","setZone","culture","start_pos","x","y","angle","line_spacing","is_return","changeZone","key","value","cur_zone","manager","rotatePolygon","changeLineSpacing","toggleRTL","move_settings","setMove","speed","alt","tank_capacity","liters_per_sec","mode","changeMove","cur_move","wheather_settings","setWheather","temperature","wind_speed","humidity","adjuvants","changeWheather","cur_wheather","savePlan","console","log","manager3D","map","on","e","translate_cursor","lngLat","lng","lat","setStartMarker","setPolygon","className","children","map_manager","fileName","_jsxFileName","lineNumber","columnNumber","_c","mapStateToProps","state","mapDispatchToProps","dispatch","data","$RefreshReg$"],"sources":["/Users/mihailbaleev/Documents/GitHub/lastochka_spraying/src/Spraying/Spraying.js"],"sourcesContent":["import \"./Spraying.scss\";\nimport Settings from \"./Settings/Settings\";\nimport { MapManager } from \"./MapManager\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { update_modal_message } from \"../AppSlice\";\nimport { sprayManager } from \"./sprayManager\";\n\nconst Spraying = (props) => {\n    const [MapManager_obj, setMapManager] = useState(null)\n    const [cursor_coords, setCursorCoords] = useState([0, 0])\n    const spray_manager = new sprayManager()\n\n    const [zone_settings, setZone] = useState({\n        culture: \"Зерно\",\n        start_pos: {x: \"\", y: \"\"},\n        angle: 0,\n        line_spacing: 1,\n        is_return: true\n    })\n    const changeZone = (key, value) => {\n        let cur_zone = {...zone_settings}\n        cur_zone[key] = value \n        setZone(cur_zone)\n        if (key === \"angle\"){\n            props.manager.rotatePolygon(value)\n        }else if (key === \"line_spacing\"){\n            props.manager.changeLineSpacing(value)\n        }else if (key === \"is_return\"){\n            props.manager.toggleRTL()\n        }\n    }\n    const [move_settings, setMove] = useState({\n        speed: 3,\n        alt: 5,\n        tank_capacity: 1,\n        liters_per_sec: 0.1,\n        mode: \"spray\"\n    })\n    const changeMove = (key, value) => {\n        let cur_move = {...move_settings}\n        cur_move[key] = value \n        setMove(cur_move)\n    }\n\n    const [wheather_settings, setWheather] = useState({\n        temperature: 20,\n        wind_speed: 2,\n        humidity: 90,\n        adjuvants: false\n    })\n    const changeWheather = (key, value) => {\n        let cur_wheather = {...wheather_settings}\n        cur_wheather[key] = value \n        setWheather(cur_wheather)\n    }\n\n    const savePlan = () => {\n        console.log(zone_settings)\n        console.log(move_settings)\n    }\n    useEffect(() => {\n        if (props.manager3D !== null){\n            let manager = new MapManager(props.map, props.manager3D, props.update_modal_message)\n            setMapManager(manager)\n            props.map.on(\"mousemove\", (e) => {\n                if (manager.translate_cursor === true){\n                   setCursorCoords([e.lngLat.lng, e.lngLat.lat]) \n                }\n            })\n            props.map.on(\"click\", (e) => {\n                if (manager.translate_cursor === true){\n                    manager.setStartMarker([e.lngLat.lng, e.lngLat.lat])\n                }else{\n                    manager.setPolygon([e.lngLat.lng, e.lngLat.lat])\n                }\n            })\n        }\n    }, [props.manager3D])\n\n    return <div className=\"spraying\">\n        <Settings \n            map_manager={MapManager_obj} \n            cursor_coords={cursor_coords} \n            spray_manager={spray_manager} \n            zone_settings={zone_settings}\n            changeZone={changeZone}\n            move_settings={move_settings}\n            changeMove={changeMove}\n            wheather_settings={wheather_settings}\n            changeWheather={changeWheather}\n            savePlan={savePlan}\n        />\n    </div>\n}\nconst mapStateToProps = (state) => {return state}\nconst mapDispatchToProps = (dispatch) => { return{\n    \"update_modal_message\": (data) => {dispatch(update_modal_message(data))}\n}}\nexport default connect(mapStateToProps, mapDispatchToProps)(Spraying)"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}