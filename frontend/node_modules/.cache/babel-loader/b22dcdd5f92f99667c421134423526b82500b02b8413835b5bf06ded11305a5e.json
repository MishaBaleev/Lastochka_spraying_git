{"ast":null,"code":"var _jsxFileName = \"/Users/mihailbaleev/Documents/GitHub/lastochka_spraying/src/layouts/Header/GoToPosition/GoToPosition.js\";\nimport React from \"react\";\nimport \"./goToPosition.css\";\nimport SearchIcon from \"./img/search.png\";\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { update_modal_message } from \"../../../AppSlice\";\nimport mapboxgl from \"mapbox-gl\";\nimport markerIcon from \"./img/marker.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass GoToPosition extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      targetValue: \"\"\n    };\n    this.errors = [\"Пустая поисковая строка\", \"Некорректное название населенного пункта\", \"Отсутствие интернет-соединения\"];\n    this.targetValueOnChange = this.targetValueOnChange.bind(this);\n    this.gotoPos = this.gotoPos.bind(this);\n    this.addTemporaryMarker = this.addTemporaryMarker.bind(this);\n  }\n  targetValueOnChange(e) {\n    this.setState(state => ({\n      targetValue: e.target.value\n    }));\n  }\n  addTemporaryMarker(coords) {\n    this.props.params.map.flyTo({\n      center: coords\n    });\n    let marker = new mapboxgl.Marker({\n      draggable: false\n    });\n    marker.setLngLat({\n      lng: coords[0],\n      lat: coords[1]\n    }).addTo(this.props.params.map);\n    let icon = document.createElement(\"img\");\n    icon.src = markerIcon;\n    icon.width = 35;\n    icon.height = 35;\n    marker.getElement().querySelector(\"svg\").remove();\n    marker.getElement().append(icon);\n    setTimeout(() => {\n      marker.remove();\n    }, 5000);\n  }\n  gotoPos() {\n    let data = new FormData();\n    data.append(\"target\", this.state.targetValue);\n    axios.post(\"/api/gotoPos/\", data).then(response => {\n      if (response.data.result == true) {\n        this.addTemporaryMarker(response.data.coords);\n      } else {\n        this.props.update_modal_message({\n          active: true,\n          heading: \"Ошибка названия\",\n          message: this.errors[response.data.errorCode]\n        });\n      }\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gotoPos\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: this.state.targetValue,\n        placeholder: \"\\u041D\\u0430\\u0441\\u0435\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u043F\\u0443\\u043D\\u043A\\u0442\",\n        onChange: this.targetValueOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: SearchIcon,\n          onClick: this.gotoPos\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this);\n  }\n}\nconst mapStateToProps = state => {\n  return state;\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    'update_modal_message': data => dispatch(update_modal_message(data))\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(GoToPosition);","map":{"version":3,"names":["React","SearchIcon","connect","axios","update_modal_message","mapboxgl","markerIcon","jsxDEV","_jsxDEV","GoToPosition","Component","constructor","props","state","targetValue","errors","targetValueOnChange","bind","gotoPos","addTemporaryMarker","e","setState","target","value","coords","params","map","flyTo","center","marker","Marker","draggable","setLngLat","lng","lat","addTo","icon","document","createElement","src","width","height","getElement","querySelector","remove","append","setTimeout","data","FormData","post","then","response","result","active","heading","message","errorCode","render","className","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","mapStateToProps","mapDispatchToProps","dispatch"],"sources":["/Users/mihailbaleev/Documents/GitHub/lastochka_spraying/src/layouts/Header/GoToPosition/GoToPosition.js"],"sourcesContent":["import React from \"react\";\nimport \"./goToPosition.css\"\nimport SearchIcon from \"./img/search.png\"\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { update_modal_message } from \"../../../AppSlice\";\nimport mapboxgl from \"mapbox-gl\";\nimport markerIcon from \"./img/marker.png\"\n\nclass GoToPosition extends React.Component{\n    constructor(props){\n        super(props)\n\n        this.state = {\n            targetValue: \"\"\n        }\n        this.errors = [\n            \"Пустая поисковая строка\",\n            \"Некорректное название населенного пункта\",\n            \"Отсутствие интернет-соединения\"\n        ]\n        this.targetValueOnChange = this.targetValueOnChange.bind(this)\n        this.gotoPos = this.gotoPos.bind(this)\n        this.addTemporaryMarker = this.addTemporaryMarker.bind(this)\n    }\n\n    targetValueOnChange(e){\n        this.setState(state => ({\n            targetValue: e.target.value\n        }))\n    }\n\n    addTemporaryMarker(coords){\n        this.props.params.map.flyTo({\n            center: coords\n        })\n        let marker = new mapboxgl.Marker({draggable: false})\n        marker.setLngLat({lng: coords[0], lat: coords[1]}).addTo(this.props.params.map)\n        let icon = document.createElement(\"img\")\n        icon.src = markerIcon\n        icon.width = 35 \n        icon.height = 35 \n        marker.getElement().querySelector(\"svg\").remove() \n        marker.getElement().append(icon)\n\n        setTimeout(() => {\n            marker.remove()\n        }, 5000)\n    }\n    gotoPos(){\n        let data = new FormData()\n        data.append(\"target\", this.state.targetValue)\n        axios.post(\"/api/gotoPos/\", data).then(response => {\n            if (response.data.result == true){\n                this.addTemporaryMarker(response.data.coords)\n            }else{\n                this.props.update_modal_message({\n                    active: true,\n                    heading: \"Ошибка названия\",\n                    message: this.errors[response.data.errorCode]\n                })\n            }\n        })\n    }\n\n    render(){\n        return(\n            <div className=\"gotoPos\">\n                <input\n                    type=\"text\"\n                    value={this.state.targetValue}\n                    placeholder=\"Населенный пункт\"\n                    onChange={this.targetValueOnChange}\n                />\n                <button><img src={SearchIcon} onClick={this.gotoPos}/></button>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return state;\n  }\n  const mapDispatchToProps =  (dispatch) => {\n    return {\n      'update_modal_message': (data) => dispatch(update_modal_message(data)),\n    }\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(GoToPosition)"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}